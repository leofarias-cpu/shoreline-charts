import { Section } from '@site/src/components/Section'
import { IntroSection } from '@site/src/components/IntroSection'

<IntroSection>

## What is this?

Table is designed to render tabular data consistently for any kind of data type.

</IntroSection>

<Section hasExplanation>

## Composition

The `Table` is designed to easily integrate with other components to create the view. You must understand the concept of the [DataView Pattern](data-view/) before reading this section.

</Section>

<Section hasExplanation>

### Anatomy

Normally you will encounter Table as the data-rendering part of the data-view, for example:

```txt
DataView
|__ DataViewHeader
|   |__ Search
|   |__ Toolbar
|   |   |__ Button
|   |__ Pagination
|
|__ Table
    |__ .Head
    |   |__ .Cell
    |__ .Body
        |__ .Row
            |__ .Cell
```

```jsx noInline live
const columns = createColumns([
  {
    id: 'name',
    header: 'Name',
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'inStock',
    header: 'In Stock',
  },
  {
    id: 'skus',
    header: 'SKUs',
  },
  {
    id: 'price',
    header: 'Price',
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item }) => {
        return <Tag label={item.status} size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

const items = [
  {
    id: 1,
    name: 'Orange',
    inStock: 380,
    skus: 0,
    status: 'Good',
    price: 80,
  },
]

function Example() {
  const view = useDataViewState()
  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    status: view.status,
    columns,
    items,
  })

  return (
    <DataView state={view}>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </DataView>
  )
}

render(<Example />)
```

</Section>

<Section hasExplanation>

### Search Form

Example using the [Search](search/) component to filter the data.

```jsx noInline live
const items = [
  {
    id: 1,
    name: 'Orange',
    inStock: 380,
    skus: 0,
    status: 'Good',
    price: 80,
  },
  {
    id: 2,
    name: 'Lemon',
    inStock: 380,
    skus: 26,
    status: 'Good',
    price: 500,
  },
  {
    id: 3,
    name: 'Tomato',
    inStock: 380,
    skus: 25,
    status: 'Good',
    price: 100,
  },
]

const columns = createColumns([
  {
    id: 'name',
    header: 'Name',
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'inStock',
    header: 'In Stock',
  },
  {
    id: 'skus',
    header: 'SKUs',
  },
  {
    id: 'price',
    header: 'Price',
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item }) => {
        return <Tag label={item.status} size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

function WithSearch() {
  const view = useDataViewState()
  const search = useSearchState()

  const searchedItems = React.useMemo(() => {
    return items.filter((item) =>
      item.name.toLowerCase().startsWith(
        // use the search debounced value to
        // filter the collection
        search.debouncedValue.toLocaleLowerCase()
      )
    )
  }, [search])

  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    status: view.status,
    columns,
    items: searchedItems,
    length: 5,
  })

  return (
    <DataView state={view}>
      <DataViewHeader>
        <Search id="search" placeholder="Search" state={search} />
      </DataViewHeader>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </DataView>
  )
}

render(<WithSearch />)
```

</Section>

<Section hasExplanation>

### Toolbar

Example using the [Toolbar](toolbar/) component.

```jsx noInline live
const columns = createColumns([
  {
    id: 'name',
    header: 'Name',
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'inStock',
    header: 'In Stock',
  },
  {
    id: 'skus',
    header: 'SKUs',
  },
  {
    id: 'price',
    header: 'Price',
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item }) => {
        return <Tag label={item.status} size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

const items = [
  {
    id: 1,
    name: 'Orange',
    inStock: 380,
    skus: 0,
    status: 'Good',
    price: 80,
  },
]

function WithToolbar() {
  const toolbar = useToolbarState()
  const view = useDataViewState()
  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    columns,
    items,
  })

  return (
    <DataView state={view}>
      <DataViewHeader>
        <Toolbar state={toolbar}>
          <ToolbarButton
            size="small"
            variant="text"
            icon={<IconArrowLineDown />}
          >
            Import
          </ToolbarButton>
          <ToolbarButton size="small" variant="text" icon={<IconArrowLineUp />}>
            Export
          </ToolbarButton>
        </Toolbar>
      </DataViewHeader>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </DataView>
  )
}

render(<WithToolbar />)
```

</Section>

<Section hasExplanation>

### Pagination

Example using the [Pagination](pagination) component.

```jsx noInline live
const NUMBER_OF_ITEMS = 100
const ITEMS_PER_PAGE = 5

const items = Array(NUMBER_OF_ITEMS)
  .fill()
  .map((_, id) => {
    return {
      id: `${id}`,
      name: faker.commerce.productName(),
      lastSale: faker.date.past().toDateString(),
      price: faker.commerce.price(),
    }
  })

const columns = createColumns([
  {
    id: 'name',
    header: 'Name',
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'lastSale',
    header: 'Last Sale',
  },
  {
    id: 'price',
    header: 'Price',
    resolver: {
      type: 'currency',
      locale: 'en-US',
      currency: 'USD',
    },
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item }) => {
        return <Tag label="Good" size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

function WithPagination() {
  const view = useDataViewState()
  const pagination = usePaginationState({
    pageSize: ITEMS_PER_PAGE,
    total: NUMBER_OF_ITEMS,
  })

  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    status: view.status,
    columns,
    items: items.slice(pagination.range[0] - 1, pagination.range[1]),
    length: ITEMS_PER_PAGE,
  })

  return (
    <DataView state={view}>
      <DataViewHeader>
        <FlexSpacer />
        <Pagination state={pagination} />
      </DataViewHeader>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </DataView>
  )
}

render(<WithPagination />)
```

</Section>

<Section hasExplanation>

### Reacting to DataView status

By dispatch the `setStatus` function of the `DataView`, the `Table` reacts to it.

```jsx noInline live
const items = Array(3)
  .fill()
  .map((_, id) => {
    return {
      id: `${id}`,
      name: faker.commerce.productName(),
      lastSale: faker.date.past().toDateString(),
      price: faker.commerce.price(),
    }
  })

const columns = createColumns([
  {
    id: 'name',
    header: 'Name',
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'lastSale',
    header: 'Last Sale',
  },
  {
    id: 'price',
    header: 'Price',
    resolver: {
      type: 'currency',
      locale: 'en-US',
      currency: 'USD',
    },
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item, context }) => {
        if (context.status === 'loading') {
          return <Skeleton csx={{ height: 24 }} />
        }

        return <Tag label="Good" size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

function StatusExample() {
  const view = useDataViewState()
  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    status: view.status,
    items,
    columns,
    length: 3,
  })

  return (
    <DataView state={view}>
      <DataViewHeader>
        <Flex>
          <Button
            onClick={() =>
              view.setStatus({
                type: 'ready',
              })
            }
          >
            Ready
          </Button>
          <Button
            onClick={() =>
              view.setStatus({
                type: 'loading',
              })
            }
          >
            Loading
          </Button>
          <Button
            onClick={() =>
              view.setStatus({
                type: 'error',
              })
            }
          >
            Error
          </Button>
          <Button
            onClick={() =>
              view.setStatus({
                type: 'not-found',
              })
            }
          >
            Not Found
          </Button>
          <Button
            onClick={() =>
              view.setStatus({
                type: 'empty',
              })
            }
          >
            Empty
          </Button>
        </Flex>
      </DataViewHeader>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </DataView>
  )
}

render(<StatusExample />)
```

</Section>

<Section hasExplanation>

## Examples

This section presents a series of examples that may be useful.

</Section>

<Section hasExplanation>

### Filters

Displaying filters and filtering data

```jsx
const FilterMultiple = experimental_FilterMultiple
const useFilterMultipleState = experimental_useFilterMultipleState
const FilterGroup = experimental_FilterGroup
const useFilterGroupState = experimental_useFilterGroupState
const Filter = experimental_Filter
const useFilterState = experimental_useFilterState

const ids = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
const items = ids.map((id) => {
  return {
    id: `${id}`,
    name: faker.commerce.productName(),
    lastSale: faker.date.past().toDateString(),
    price: faker.commerce.price(),
    brand: faker.random.arrayElement(['mistery_id', 'cool_id']),
  }
})

const columns = createColumns([
  {
    id: 'name',
    header: 'Name',
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'brand',
    header: 'Brand ID',
  },
  {
    id: 'lastSale',
    header: 'Last Sale',
  },
  {
    id: 'price',
    header: 'Price',
    resolver: {
      type: 'currency',
      locale: 'en-US',
      currency: 'USD',
    },
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item }) => {
        return <Tag label="Good" size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

function FilterControls() {
  const [data, setData] = useState(items)
  const view = useDataViewState()

  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    status: view.status,
    columns,
    items: data,
  })

  const [quality, setQuality] = useState()
  const [brand, setBrand] = useState()

  const brandFilterState = useFilterMultipleState({
    items: [
      { label: 'Mistery brand', id: 'mistery_id' },
      { label: 'Cool brand', id: 'cool_id' },
    ],
    onChange: ({ selected }) => {
      setBrand(selected)
    },
    label: 'Brand',
  })

  const qualityFilterState = useFilterState({
    items: [
      { label: 'Normal', id: 'norm' },
      { label: 'Premium', id: 'prem' },
    ],
    onChange: ({ selected }) => {
      setQuality(selected)
    },
    label: 'Quality',
  })

  const filterGroupState = useFilterGroupState({
    filterStates: [qualityFilterState, brandFilterState],
  })

  useEffect(() => {
    const filtered = items.filter((item) => {
      if (quality === 'norm' && Number(item.price) > 510) {
        return false
      }

      if (quality === 'prem' && Number(item.price) <= 510) {
        return false
      }

      if (brand && brand.length) {
        if (!brand.includes('cool_id') && item.brand === 'cool_id') {
          return false
        }

        if (!brand.includes('mistery_id') && item.brand === 'mistery_id') {
          return false
        }
      }

      return true
    })

    setData(filtered)
  }, [quality, brand])

  return (
    <DataView state={view}>
      <DataViewHeader>
        <FilterGroup state={filterGroupState}>
          <FilterMultiple state={brandFilterState} />
          <Filter state={qualityFilterState} />
        </FilterGroup>
      </DataViewHeader>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </DataView>
  )
}

render(<FilterControls />)
```

</Section>

<Section hasExplanation>

### Topbar

Mixing the concepts of `Search`, `Toolbar` and `Pagination`

```jsx noInline live
const NUMBER_OF_ITEMS = 100
const ITEMS_PER_PAGE = 5

const items = Array(NUMBER_OF_ITEMS)
  .fill()
  .map((_, id) => {
    return {
      id: `${id}`,
      name: faker.commerce.productName(),
      lastSale: faker.date.past().toDateString(),
      price: faker.commerce.price(),
    }
  })

const columns = createColumns([
  {
    id: 'name',
    header: 'Name',
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'lastSale',
    header: 'Last Sale',
  },
  {
    id: 'price',
    header: 'Price',
    resolver: {
      type: 'currency',
      locale: 'en-US',
      currency: 'USD',
    },
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item }) => {
        return <Tag label="Good" size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

function WithFullTopbar() {
  const toolbar = useToolbarState()
  const view = useDataViewState()
  const search = useSearchState()
  const pagination = usePaginationState({
    pageSize: ITEMS_PER_PAGE,
    total: NUMBER_OF_ITEMS,
  })

  const paginatedItems = React.useMemo(() => {
    pagination.paginate({ type: 'reset' })
    return items.filter((item) =>
      item.name.toLowerCase().startsWith(
        // use the search debounced value to
        // filter the collection
        search.debouncedValue.toLocaleLowerCase()
      )
    )
  }, [search.debouncedValue])

  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    status: view.status,
    columns,
    items: [...paginatedItems].slice(
      pagination.range[0] - 1,
      pagination.range[1]
    ),
    length: ITEMS_PER_PAGE,
  })

  return (
    <DataView state={view}>
      <DataViewHeader>
        <Search id="search" placeholder="Search" state={search} />
        <Toolbar state={toolbar} aria-label="Toolbar">
          <ToolbarButton
            size="small"
            variant="text"
            icon={<IconArrowLineDown />}
          >
            Import
          </ToolbarButton>
          <ToolbarButton size="small" variant="text" icon={<IconArrowLineUp />}>
            Export
          </ToolbarButton>
        </Toolbar>
        <FlexSpacer />
        <Pagination
          state={pagination}
          preposition="of"
          subject="results"
          prevLabel="Previous"
          nextLabel="Next"
        />
      </DataViewHeader>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </DataView>
  )
}

render(<WithFullTopbar />)
```

</Section>

<Section hasExplanation>

### Data fetching

Example with a simulated data fetching

```jsx noInline live
/**
 * Function to simulate a request
 * You can configure the delay and numberOfItems here
 */
function request(delay = 3000, numberOfItems = 3) {
  return new Promise(function (resolve) {
    setTimeout(
      resolve,
      delay,
      Array(numberOfItems)
        .fill()
        .map((_, id) => {
          return {
            id: `${id}`,
            name: faker.commerce.productName(),
            lastSale: faker.date.past().toDateString(),
            price: faker.commerce.price(),
          }
        })
    )
  })
}

const columns = createColumns([
  {
    id: 'name',
    header: 'Name',
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'lastSale',
    header: 'Last Sale',
  },
  {
    id: 'price',
    header: 'Price',
    resolver: {
      type: 'currency',
      locale: 'en-US',
      currency: 'USD',
    },
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item, context }) => {
        if (context.status === 'loading') {
          return <Skeleton csx={{ height: 24 }} />
        }

        return <Tag label="Good" size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

function DataFetchExample() {
  const [items, setItems] = React.useState([])
  /**
   * This is just for the example purposes so, nevermind
   */
  const [update, setUpdate] = React.useState(false)

  const view = useDataViewState()
  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    status: view.status,
    columns,
    length: 3,
    items,
  })

  React.useEffect(() => {
    view.setStatus({
      type: 'loading',
    })
    request().then((d) => {
      setItems(d)
      view.setStatus({
        type: 'ready',
      })
    })
  }, [update])

  return (
    <DataView state={view}>
      <DataViewHeader>
        <Button
          onClick={() => {
            setUpdate((u) => !u)
          }}
        >
          Simulate data fetching
        </Button>
      </DataViewHeader>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </DataView>
  )
}

render(<DataFetchExample />)
```

</Section>

<Section hasExplanation>

### Selectable row

Example with a simulated data fetching

```jsx noInline live
const columns = createColumns([
  {
    id: 'id',
    resolver: {
      type: 'selection',
      mapId: (item) => item.id,
    },
  },
  {
    id: 'name',
    header: 'Name',
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'lastSale',
    header: 'Last Sale',
  },
  {
    id: 'price',
    header: 'Price',
    resolver: {
      type: 'currency',
      locale: 'en-US',
      currency: 'USD',
    },
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item, context }) => {
        if (context.status === 'loading') {
          return <Skeleton csx={{ height: 24 }} />
        }

        return <Tag label="Good" size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

const items = Array(3)
  .fill()
  .map((_, id) => {
    return {
      id: `${id}`,
      name: faker.commerce.productName(),
      lastSale: faker.date.past().toDateString(),
      price: faker.commerce.price(),
    }
  })

function DataFetchExample() {
  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    columns,
    length: 3,
    items,
  })

  const selection = useSelectionTreeState({
    items: data,
    mapId: (item) => item.id,
  })

  return (
    <SelectionTree state={selection}>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </SelectionTree>
  )
}

render(<DataFetchExample />)
```

</Section>

<Section hasExplanation>

### Fixed columns

It is possible to set columns to be fixed when scrolling horizontally. You just need to set the column prop `fixed` to `true`.

```jsx noInline live
const columns = createColumns([
  {
    id: 'id',
    fixed: true,
    resolver: {
      type: 'selection',
      mapId: (item) => item.id,
    },
  },
  {
    id: 'name',
    header: 'Name',
    fixed: true,
    resolver: {
      type: 'text',
      columnType: 'name',
      mapText: (item) => item.name,
    },
  },
  {
    id: 'lastSale',
    header: 'Last Sale',
    width: 500,
  },
  {
    id: 'price',
    header: 'Price',
    resolver: {
      type: 'currency',
      locale: 'en-US',
      currency: 'USD',
    },
  },
  {
    id: 'status',
    header: 'Status',
    resolver: {
      type: 'root',
      render: ({ item, context }) => {
        if (context.status === 'loading') {
          return <Skeleton csx={{ height: 24 }} />
        }

        return <Tag label="Good" size="normal" />
      },
    },
  },
  {
    header: 'Actions',
    resolver: {
      type: 'menu',
      actions: [
        {
          label: 'Add to cart',
        },
        {
          label: 'Buy',
        },
      ],
    },
  },
])

const items = Array(3)
  .fill()
  .map((_, id) => {
    return {
      id: `${id}`,
      name: faker.commerce.productName(),
      lastSale: faker.date.past().toDateString(),
      price: faker.commerce.price(),
    }
  })

function DataFetchExample() {
  const { data, getBodyCell, getHeadCell, getTable } = useTableState({
    columns,
    length: 3,
    items,
  })

  const selection = useSelectionTreeState({
    items: data,
    mapId: (item) => item.id,
  })

  return (
    <SelectionTree state={selection}>
      <Table {...getTable()}>
        <THead>
          {columns.map((column) => (
            <THeadCell {...getHeadCell(column)} />
          ))}
        </THead>
        <TBody>
          {data.map((item) => {
            return (
              <TBodyRow
                key={item.id}
                onClick={() => alert(`Item: ${item.name}`)}
              >
                {columns.map((column) => {
                  return <TBodyCell {...getBodyCell(column, item)} />
                })}
              </TBodyRow>
            )
          })}
        </TBody>
      </Table>
    </SelectionTree>
  )
}

render(<DataFetchExample />)
```

</Section>
