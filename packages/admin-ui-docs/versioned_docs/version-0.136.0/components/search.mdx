---
title: Search
path: /search/
hide_table_of_contents: true
---

import { Page, Panel } from '@site/src/components/Page'
import { PageSection } from '@site/src/components/PageSection'
import { IntroSection } from '@site/src/components/IntroSection'
import { Section } from '@site/src/components/Section'

export const tabToc = {
  overview: [
    {
      id: 'what-is-this',
      value: 'What is this?',
      level: 2,
    },
    {
      id: 'loading',
      value: 'Loading',
      level: 2,
    },
    {
      id: 'disabled',
      value: 'Disabled',
      level: 2,
    },
    {
      id: 'intl',
      value: 'Internationalized Placeholder',
      level: 2,
    },
    {
      id: 'debounce',
      value: 'Debounce',
      level: 2,
    },
    {
      id: 'query',
      value: 'Persisted state in query params',
      level: 2,
    },
  ],
  codeReference: [
    {
      id: 'usage',
      value: 'Usage',
      level: 2,
    },
    {
      id: 'props',
      value: 'Props',
      level: 2,
    },
    {
      id: 'search-props',
      value: 'Search',
      level: 3,
    },
    {
      id: 'use-search-state-params',
      value: 'useSearchState Params',
      level: 3,
    },
    {
      id: 'use-search-state-return',
      value: 'useSearchState return',
      level: 3,
    },
    {
      id: 'use-query-search-state-params',
      value: 'useQuerySearchState Params',
      level: 3,
    },
    {
      id: 'use-query-search-state-return',
      value: 'useQuerySearchState Return',
      level: 3,
    },
    {
      id: 'accessibility',
      value: 'Accessibility',
      level: 2,
    },
  ],
  designReference: [
    {
      id: 'components',
      value: 'Components',
      level: 2,
    },
    {
      id: 'position',
      value: 'Position',
      level: 2,
    },
    {
      id: 'behavior',
      value: 'Behavior',
      level: 2,
    },
    {
      id: 'content',
      value: 'Content',
      level: 2,
    },
  ]
}

<Page toc={tabToc} hasTabs>
<Panel id="overview">

<IntroSection>

## What is this?

Search inputs allow merchants to filter by free form content that can't be classified in predefined options.

</IntroSection>

<br /><br />

<Section>

## Loading

<br />

```jsx live
function Example() {
  const [value, setValue] = useState('')

  return (
    <div className={csx({ width: 400 })}>
      <Search
        value={value}
        onChange={(e) => setValue(e.target.value)}
        onClear={() => setValue('')}
        loading
      />
    </div>
  )
}
```

<br />

## Disabled

<br />

```jsx live
function Example() {
  const [value, setValue] = useState('')

  return (
    <div className={csx({ width: 400 })}>
      <Search
        disabled
        value={value}
        onChange={(e) => setValue(e.target.value)}
        onClear={() => setValue('')}
      />
    </div>
  )
}
```

<br />

## Internationalized Placeholder

<br />

```jsx live
function Example() {
  const [value, setValue] = useState('')

  const I18nProvider = experimental_I18nProvider

  return (
    <I18nProvider locale="pt-BR">
      <div className={csx({ width: 400 })}>
        <Search
          disabled
          value={value}
          onChange={(e) => setValue(e.target.value)}
          onClear={() => setValue('')}
        />
      </div>
    </I18nProvider>
  )
}
```

<br />

## Debounce

<br />

A common UX pattern is to filter the collections (or make a query) while the user types the input. To do that performatively, we often use debounced values. You can use the `useSearchState`` hook which stores a debounced value for you.

<br />

```jsx live
function Example() {
  const { getInputProps, value, debouncedValue } = useSearchState({
    // controls the debounce timeout
    timeout: 500,
  })

  return (
    <div className={csx({ width: 400 })}>
      <Search {...getInputProps()} />
      <div className={csx({ marginTop: 4 })}>
        <p>Value: {value}</p>
        <p>DebouncedValue: {debouncedValue}</p>
      </div>
    </div>
  )
}
```

<br />

## Persisted state in query params

<br />

You can persist the search value within the browser's query params using the `useQuerySearchState` hook, instead of `useSearchState`. The application should be wrapped by `QueryStateProvider`. Watch how your url changes (note that the persisted value is the debounced value).

<br />

```jsx live
function Example() {
  const Content = () => {
    const { getInputProps, value, debouncedValue } = useQuerySearchState()

    return (
      <div className={csx({ width: 500 })}>
        <Search {...getInputProps()} />
        <div className={csx({ marginTop: 4 })}>
          <p>Value: {value}</p>
          <p>DebouncedValue: {debouncedValue}</p>
        </div>
      </div>
    )
  }

  return (
    <QueryStateProvider>
      <Content />
    </QueryStateProvider>
  )
}
```

</Section>

</Panel>

<Panel id="codeReference">

<Section>

## Usage

Remember that you can use the useSearchState or useSearchQueryState hooks to help you managing the Search state.

<br />

```jsx
import { Search, useSearchState } from '@vtex/admin-ui'

function Example() {
  const [value, setValue] = useState('')
  const [loading, setLoading] = useState(false)

  return (
    <Search
      value={value}
      onChange={(e) => setValue(e.target.value)}
      onClear={() => setValue('')}
      loading={loading}
    />
  )
}
```

<br />

## Props

<br />

In the following sections you can check the properties of the Search component and its hooks.

### Search

<br />

You can use all the props accepted by the `form` JSX element.

<br />

| Name     | Type                                   | Description                              | Required | Default |
| -------- | -------------------------------------- | ---------------------------------------- | -------- | ------- |
| onClear  | `() => void`                           | Clears the input value                   | ðŸš«       | -       |
| value    | `string`                               | Input value                              | ðŸš«       | `''`    |
| onChange | `ChangeEventHandler<HTMLInputElement>` | Event triggered when input value changes | ðŸš«       | -       |
| loading  | `boolean`                              | Whether the search is loading or not     | ðŸš«       | `false` |

### useSearchState Params

<br />

| Name         | Type     | Description                   | Required | Default |
| ------------ | -------- | ----------------------------- | -------- | ------- |
| initialValue | `string` | Initial input value           | ðŸš«       | `''`    |
| defaultValue | `string` | Value set in the clean action | ðŸš«       | `''`    |
| timeout      | `number` | Debounce timeout in ms        | ðŸš«       | `250`   |

### useSearchState return

<br />

| Name           | Type                                   | Description                                             |
| -------------- | -------------------------------------- | ------------------------------------------------------- |
| debouncedValue | `string`                               | Input value with debouce                                |
| setValue       | `(value: string) => void`              | Sets the value state                                    |
| onClear        | `() => void`                           | Clears the input value                                  |
| value          | `string`                               | Input value                                             |
| onChange       | `ChangeEventHandler<HTMLInputElement>` | Event triggered when input value changes                |
| getInputProps  | `() => { value, onClear, onChange }`   | It returns the necessary properties to the Search works |

### useQuerySearchState Params

<br />

| Name             | Type      | Description                   | Required | Default |
| ---------------- | --------- | ----------------------------- | -------- | ------- |
| defaultValue     | `string`  | Value set in the clean action | ðŸš«       | `''`    |
| initiallyLoading | `boolean` | If is initially loading       | ðŸš«       | `false` |
| timeout          | `number`  | Debounce timeout in ms        | ðŸš«       | `250`   |


### useQuerySearchState Return

<br />

The object returned from the state hook is the same as useSearchState.

<br /><br />

## Accessibility

<br />

To ensure that assistive technology can interact safely with the Search component, you must define the `aria-label` property when using multiple Search components in the same page. Remember that each aria-label should be unique and if you're dealing with i18n, you must translate them.

<br /><br />

```jsx
import { Search, useSearchState } from '@vtex/admin-ui'

function Example() {
  const { getInputProps } = useSearchState()

  return (
    <Page>
      <Search {...getInputProps()} aria-label="Unique and meaningful label" />
      ...
      <Search
        {...getInputProps()}
        aria-label="Another unique and meaningful label"
      />
    </Page>
  )
}
```
</Section>

</Panel>

<Panel id="designReference">

<PageSection
  id={tabToc.designReference[0].id}
  title={tabToc.designReference[0].value}
>

<details>
  <summary><h4>When to choose a Filter, a Text Input or a Combobox instead of a Search?</h4></summary>
  <div>
    <ul>
        <li>Choose the Filter component when the content can be classified in predefined options that can be chosen as criteria to filter items.</li>
        <li>Choose the Text Input component to fill free form content that will be submitted as part of a form. </li>
        <li>Choose the Combobox component (single or multiple) to contextually filter a list of options and then submit the selected ones as part of a form.</li>
    </ul>
  </div>
</details>

</PageSection>

<PageSection
  id={tabToc.designReference[1].id}
  title={tabToc.designReference[1].value}
>

<details>
  <summary><h4>Where should Search be positioned in a container?</h4></summary>
  <div>
    Considering left-to-right interfaces, follow these recommendations:
    <ul>
        <li>Position the Search directly above the content that will be filtered.</li>
        <li>The Search should always be in the top left of a container.</li>
        <li>Use the<a href="https://admin-ui.vercel.app/components/data-view"> DataView</a> component to correctly position the Search.</li>
    </ul>
  </div>
    <br />
  <div>
    <strong>What to avoid:</strong>
      <ul>
        <li>Don't position the Search in the header of a container.</li>
      </ul>
  </div>
</details>

</PageSection>

<PageSection
  id={tabToc.designReference[2].id}
  title={tabToc.designReference[2].value}
>

<details>
  <summary><h4> When to use a disabled Search?</h4></summary>
  <div>
    Avoid using a disabled Search. Use the DataView component instead, which automatically hides the Search input when the list is empty.
  </div>
</details>

<details>
  <summary><h4>When to use a loading Search?</h4></summary>
  <div>
    <ul>
        <li>Use a loading Search when the search takes more than a second to process.</li>
    </ul>
  </div>
  <br />
  <div>
    <strong>What to avoid:</strong>
      <ul>
        <li>Donâ€™t block merchants from editing the input during the loading state.</li>
        <li>The search process shouldnâ€™t take longer than five seconds.</li>
      </ul>
  </div>
</details>

<details>
  <summary><h4>What should be the searching feedback in a list?</h4></summary>
  <div>
    <ul>
        <li>The loading state with a spinner in the Search Input should be the only feedback while the search is being processed. After the results load, the Search input should go back to its default state.</li>
        <li>Maintain the previous results visible until the new ones finish loading.</li>
    </ul>
  </div>
  <br />
  <div>
    <strong>What to avoid:</strong>
      <ul>
        <li>Donâ€™t show a Skeleton when processing a search.</li>
      </ul>
  </div>
</details>

<details>
  <summary><h4> When to clear or persist search results?</h4></summary>
  <div>
    <ul>
        <li>Clear results only when the merchant clicks on the Button with the <code>&lt;IconXCircle /></code> inside the Search input or manually erases the search terms.</li>
        <li>Maintain the previous results visible until the new ones finish loading.</li>
    </ul>
  </div>
  <br />
  <div>
    <strong>What to avoid:</strong>
      <ul>
        <li> Donâ€™t use local storage or cookies to store the search query.</li>
      </ul>
  </div>
</details>

<details>
  <summary><h4>What should be the search error feedback?</h4></summary>
  <div>
    When the search doesnâ€™t return results due to an error, use the<a href="https://admin-ui.vercel.app/components/data-view"> DataView</a> component to correctly display the feedback.
  </div>
</details>

<details>
  <summary><h4>What should be the no results feedback?</h4></summary>
  <div>
    When the search works but returns empty because there are no results matching the query, use the<a href="https://admin-ui.vercel.app/components/data-view"> DataView</a> component to correctly display the feedback.
  </div>
</details>

<details>
  <summary><h4>When to support search operators for advanced search?</h4></summary>
  <div>
    Avoid supporting search operators. Even though they are powerful, they arenâ€™t discoverable and can be complex for most merchants. Prefer using <a href="https://admin-ui.vercel.app/components/filter">Filters</a> as a way to combine criteria.
  </div>
</details>


<details>
  <summary><h4>What should be the search logic?</h4></summary>
  <div>
    <ul>
        <li>Ignore typos, capitalization and accents.</li>
        <li>Support synonyms.</li>
    </ul>
  </div>
  <br />
  <div>
    <strong>What to avoid:</strong>
      <ul>
        <li>Donâ€™t include a Search input for each type of information that can be searched, support all of them in the same input.</li>
      </ul>
  </div>
</details>

</PageSection>

<PageSection
  id={tabToc.designReference[3].id}
  title={tabToc.designReference[3].value}
>

<details>
  <summary><h4>What should be the placeholder text of a Search?</h4></summary>
  <div>
    In most cases, the experience should be intuitive enough not to need instructions on what should be searched. Only customize the placeholder text after UX research to understand the merchantsâ€™ needs, following these guidelines:
    <ul>
        <li>Describe the properties that can be searched when they go beyond the merchantâ€™s expectations. For example,<em> Search for Name, ID or Ref ID</em>.</li>
        <li>Considering localization, prioritize the properties that are most relevant according to UX research. For example,<em> Search for Name, ID, Ref ID and more</em>.</li>
        <li>When a Table column has a label for the same property, reuse the name to maintain consistency.</li>
    </ul>
  </div>
  <br />
  <div>
    <strong>What to avoid:</strong>
      <ul>
        <li>Donâ€™t use placeholder text to include important information, since it will be hidden when the merchant types search terms.</li>
        <li>Avoid redundancy. Instead of writing <em>Product name</em> and <em>Product ID</em> in a <em>Products</em> page, write <em>Name</em> and <em>ID</em>.</li>
        <li>Avoid writing more than 36 characters.</li>
        <li>Donâ€™t customize the width of the Search input on <a href="https://admin-ui.vercel.app/components/data-view">DataView</a> to make the custom placeholder fit.</li>
        <li>Avoid adding support to search for properties that are not being shown for each result.</li>
      </ul>
  </div>
</details>

<details>
  <summary><h4>What should be the icon of a Search?</h4></summary>
  <div>Always show <code>&lt;IconMagnifyingGlass /></code> to ensure the Search input is easily recognizable by merchants.
  </div>
</details>

</PageSection>

</Panel>

</Page>
